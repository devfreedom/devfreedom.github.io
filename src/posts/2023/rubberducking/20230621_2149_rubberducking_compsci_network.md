---
title: "[러버덕 타임] OSI Layer 1/2/3 에서 사용되는 네트워크 장비들의 차이점"
date: 2023-06-21T21:49
thumb: "rubber-duck.jpg"
tags: 
    - ❮러버덕❯
    - 컴퓨터공학
    - 네트워크
---

브릿지라느니, L2 스위치라느니, 라우터라느니, L3 스위치라느니, 네트워크 장비들은 뭔가 다 비슷비슷하고 헷갈립니다. 한번 확실하게 구분해보고자 OSI 7계층 모델 기반으로 정보를 찾아보고 요약해봤습니다. L3 스위치랑 라우터, 여전히 이건 정말 비슷하네요.

---

## 1. 물리 계층

국제표준화기구(ISO)에서는 네트워크에서 송신 호스트와 수신 호스트가 서로 통신하는 방식을 7가지 계층별로 구분해서 규정하였고, 이를 OSI 7계층 모델이라고 합니다. OSI 7계층 중에서 가장 아래쪽에 위치하는 물리 계층은 송신 측과 수신 측을 연결하는 물리적 연결을 규정합니다. 
- 여기서 말하는 물리적 연결은 네트워크를 물리적으로 구성하는데 사용되는 케이블, 커넥터, 리피터, 전기적 신호 등의 규격을 의미합니다. 
- 이렇게 사전에 정의된 규격대로 송신 측과 수신 측이 물리적 매체를 구성해야 이를 통해 전기를 흘리고(1) 흘리지 않으면서(0) 비트 단위의 정보, 즉 비트스트림을 전송할 수 있습니다. 
    - 그리고 이런 물리적 규격에 기반해 네트워크의 토폴로지, 단방향/반이중/전이중 통신, 직렬/병렬 통신, 신호 변조 여부, 비트레이트 등을 구성할 수 있게 됩니다.

물리 계층에서 사용되는 장비에는 다음과 같은 것들이 있습니다.

- 케이블
    - 케이블의 종류로는 전자적 노이즈 방지를 위해 내부의 선들을 꼬아서 만든 꼬임선(twisted pair) 케이블과, 절연 처리된 심선을 중심으로 그 주위를 전도체들이 감싸는 형태의 동축(coaxial) 케이블, 그리고 광케이블이 있습니다. 
    - 꼬임선은 비차폐 꼬임선과 차폐 처리가 된 차폐 꼬임선으로 나눌 수 있습니다. 대표적인 꼬임선 케이블 규격으로는 최대 100Mbps를 지원하는 비차폐(UTP) CAT-5, 최대 1Gbps를 지원하는 비차폐(UTP) CAT-5e와 은박 차폐형(FTP) CAT-5e, 각 꼬임선 페어들을 십자 막대 형태의 심지에 나눠 담아 간섭을 차단하는 최대 1Gbps를 지원하는 격벽 차폐형 CAT-6 케이블, 꼬임선 페어를 다시 한번 감싸서 차폐한 피복 차폐형(STP) CAT-7 케이블 등이 있습니다. 
    - 이제는 더 이상 네트워크 용도로는 사용되지 않는, IEEE에서 폐기한 구식 규격인 동축 케이블에는 최대 200m 길이에 10Mbps 속도로 베이스벤드 통신을 하는 10BASE2와 500m 길이의 10BASE5가 있습니다. 
    - 광케이블은 전도체를 통해 전달되는 전기 신호 대신에 광섬유를 통해 전달되는 빛을 이용합니다. 간섭, 왜곡, 감쇠가 거의 없다는 특장점이 있어서 빠른 속도의 장거리 데이터 통신을 가능하게 하는 케이블이지만, 광섬유의 내구성이 낮고 유지보수가 까다로운데다가 광학적 신호를 전기 신호로 바꿔주는 장치도 필요하다는 단점도 있습니다.
- 리피터
    - 리피터는 물리적인 전송회선의 길이를 연장해주는 역할을 합니다. 송신 측 장비에서는 정해진 만큼의 전력으로 전기 신호를 보내게 되는데, 거리가 멀어서 케이블이 길어질수록 케이블이라는 재료가 가지는 물리학적 저항으로 인해 신호가 약해지고 손실되는 감쇠 현상이 발생하게 됩니다. 
    - 리피터는 들어온 신호를 추가적인 전력을 사용해 증폭을 시켜서 다시 출력해줍니다. 신호 증폭기 역할을 하는 리피터를 추가적인 케이블과 함께 네트워크 노드에 추가해주면 매우 먼 거리에 있는 수신 호스트에도 데이터를 손실 없이 보낼 수 있지만, 대신에 신호 증폭 과정에서 지연시간이 길어지는 부작용은 감수해야 합니다. 
    - 요즘에는 허브라던가 스위치 등 다른 네트워크 장비에도 리피터 기능이 포함되어 있기도 해서, 리피터를 독립적인 장치로는 거의 사용하지 않는 추세입니다.
- 이더넷 허브
    - 흔히 '허브'라고 줄여서 부르는 네트워크용 '이더넷 허브'는 쉽게 말해서 '다출력 리피터'라고 할 수 있습니다. 
    - 허브는 원래의 대역폭을 접속된 장치의 개수만큼 쪼개서, 들어온 데이터를 허브에 접속된 모든 장비에게 전송합니다. 
    - 허브는 트래픽을 직접 관리하지 않고, 한 번에 하나의 반이중 통신을 하는 방식으로 다중 출력을 수행합니다. 그러다보니 접속된 여러 장치들이 허브로 데이터를 동시에 보내게 되면 충돌, 즉 '콜리전(collision)' 이 다른 장비에 비해 많이 발생하게 됩니다. 
    - 허브에는 콜리전 감지 및 관리 기능이 들어있어 만약 콜리전이 발생하게 되면 접속 장비들에게 지금 통신이 충돌하고 있다는 '잼 신호(jam signal)'를 보내어 이를 해소합니다. 허브는 비효율적이라서 사용하지 않는 추세이며, 스위치에 의해 대체되었습니다.

## 2. 데이터링크 계층

OSI 7계층 모델에서 데이터링크 계층은 물리 계층 위에 자리잡고 있습니다. 

물리 계층에서는 호스트들을 물리적으로 연결해서 네트워크를 물리적으로 구성하는 방법을 규정했다면, 데이터링크 계층에서는 물리적으로 구성된 네트워크 위에서 데이터를 어떻게 주고 받을지를 논리적 차원에서 규정합니다. 
- 물리적인 장치로써 존재하는 호스트를 네트워크 상에서 논리적인 '노드'로써 인식할 수 있도록 MAC 주소를 할당하고, 전송되는 신호가 프레임 단위로써 오류 없이 정상적으로 목적지까지 도달하는지를 확인하고 점검하는 역할을 합니다.

데이터링크 계층에서 사용되는 장비에는 다음과 같은 것들이 있습니다.

- 브리지
    - 네트워크 브리지는 근거리 네트워크들을 연결해주는 장비입니다. 네트워크 속에 존재하는 작은 네트워크를 '세그먼트'라고 하는데, 브리지를 사용해서 2~4개의 세그먼트들을 서로 연결해줄 수 있습니다. 
    - 수동적으로 전달만 하는 허브나 리피터와는 달리 브리지는 들어오는 트래픽을 능동적으로 제어합니다. 
        - 브리지는 들어오는 프레임을 완전히 받고 나서 이를 점검합니다. 프레임에 적힌 MAC 주소에 기반해 이를 전달해주고, 만약 에러가 있다는 것이 확인되면 프레임을 폐기하고 재전송을 요청합니다. 
    - 브리지는 대역폭을 쪼개는 대신 독립적으로 대역폭을 제공하기 때문에, 브리지를 사용해서 세그먼트들을 묶으면 네트워크의 대역폭이 증가하는 효과가 있습니다. 
    - 위에서 언급한 '콜리전'이 일어날 수 있는, 하나의 허브에 연결된 장치들의 집합을 '콜리전 도메인' 이라고 하는데, 브리지를 사용해서 콜리전 도메인들을 구성하고 연결하게 되면 콜리전 발생을 감소시키고 성능을 향상시킬 수 있습니다. 
    - 브리지는 이러한 역할을 소프트웨어 기반으로 처리합니다. 
    - 브리지는 허브보다 복잡하고 여러 장점들이 있음에도 불구하고 요즘은 해당 기능을 포함하고 있는 스위치나 라우터에 의해 대체되었습니다. 
- L2 스위치
    - 스위치라는 장비는 브리지와 비슷하지만, 트래픽 분석과 포워딩 처리를 소프트웨어가 수행하는 브리지와는 다르게, 그 역할을 담당하는 별도의 특수목적(ASIC) 칩이 내장되어 있어서 하드웨어 수준에서 그 역할을 수행합니다. 
        - 그래서 작동 속도가 빠르고 접속 포트 수도 훨씬 많습니다. 
        - 브리지와는 달리 스위치는 가상 LAN을 지원하기도 합니다. 
            - 이 기능을 통해 다른 세그먼트에 있는 호스트라도 같은 세그먼트에 있는 호스트처럼 가상으로 지정해줄 수 있습니다. 
    - 데이터링크 계층에서 필요한 기능을 가진 가장 기본적인 스위치는 'L2스위치'라는 장비입니다. 
        - L2 스위치는 MAC 주소를 기반으로 패킷을 전달하는 역할을 합니다. 
        - 스위치는 데이터링크 계층에서만 사용하는 것은 아니고, 상위 계층에서도 각 계층에 필요한 추가적인 기능들이 들어간 스위치를 사용합니다. 
            - 다음 문항에서 언급할 'L3 스위치'의 경우는 L2 스위치에 라우팅 기능이 포함된 것입니다.

## 3. 네트워크 계층

OSI 7계층 모델에서 네트워크 계층은 데이터링크 계층 위에 자리잡고 있습니다. 

데이터링크 계층에서는 MAC 주소를 기반으로 노드들을 확인하고 데이터를 온전하게 전달하는 방식을 규정했다면, 네트워크 계층에서는 IP 주소를 기반으로 데이터가 출발지에서 목적지까지 어떠한 '경로'로 전달되어야 하고 그것을 어떻게 판단 및 관리해야 하는지를 규정하게 됩니다. 

네트워크 계층에서 규정하고자 하는 핵심은 바로 경로 설정, 즉 '라우팅' 입니다. 라우팅이 필요한 이유는 지연이나 낭비 없이 최초 출발지에서 최종 목적지까지 데이터를 패킷 단위로 가장 빠르고 안전하고 효율적으로 전달하기 위함입니다.

네트워크 계층에서 사용되는 장비에는 다음과 같은 것들이 있습니다.

- 라우터
    - 라우터는 IP 주소를 기반으로 하는 네트워크들을 연결해줍니다. 출발지 IP에서 목적지 IP까지 패킷이라는 단위로 데이터를 안전하게 보내기 위해서 경로를 설정하고 트래픽을 제어합니다. 
    - 주로 외부 네트워크와 내부 네트워크 사이, 즉 인터넷과 내부망을 연결하는데 사용됩니다. 
    - 라우터는 경로 설정 방법을 지정한 규약인 라우팅 프로토콜에 기반해서 경로 설정을 수행합니다. 
        - RIP 라우팅 프로토콜을 사용하는 라우터의 경우에는 매 30초마다 자신이 가지고 있는 모든 라우팅 테이블 정보를 다른 라우터들에게 알려주고 마찬가지로 다른 라우터들로부터 그들의 테이블을 공유받으면서 경로 설정을 위한 정보를 보유 및 갱신하게 됩니다. 이 정보에 기반해서 라우터는 경유지 개수(hop count)가 가장 적은 하나의 최단 경로를 선택하게 됩니다. 
        - OSPF 라우팅 프로토콜을 사용하는 라우터의 경우에는 모든 라우터들이 대등한 지위에 있는 RIP와는 달리 라우터들을 계층화시켜 구성합니다. OSPF 프로토콜에서는 네트워크 토폴로지 데이터를 미리 공유하는데, 이후 네트워크에 변화가 있을 때만 라우팅 정보를 전송하게 됩니다. 
            - 라우터는 HELLO 패킷을 인접 라우터에 전송해서 그들을 인식하고 각 라우터들은 네트워크 링크 상태를 브로드캐스트합니다. 라우터는 이것을 수신해서 토폴로지 전체에 대한 링크 상태 데이터베이스를 구성하게 되고 이를 바탕으로 알고리즘을 통해 링크 상태가 가장 좋은 최적의 경로를 찾게 됩니다. 
    - 이 외에도 다양한 라우팅 프로토콜을 지원하는 라우터가 사용됩니다. 라우터는 CPU로 구동되는 소프트웨어를 통해 라우팅을 수행합니다.
- L3 스위치
    - 이전에 설명한 L2 스위치에서 라우터의 기능까지 포함한 스위치가 바로 L3 스위치입니다. 
    - 라우터는 CPU로 구동되는 소프트웨어 방식으로 라우팅을 수행하고, L3 스위치는 스위칭 전용 하드웨어(ASIC) 기반으로 IP 프로토콜에서의 패킷 스위칭을 담당하기 때문에 원론적으로는 차이가 있다고 할 수 있지만, 이후 L3 스위치에서도 RIP이라던가 OSPF와 같은 동적 라우팅 프로토콜을 지원하기 시작하면서 지금은 그 경계가 흐려졌다고 할 수 있습니다. 
        - 굳이 차이점을 들자면 ASIC 기반으로 작동하는 L3 스위치의 포워딩/스위칭 성능과 용량이 라우터보다는 나을 수 있고, 대신에 라우터는 보다 폭넓은 라우팅 프로토콜, 큰 라우팅 테이블, 다양한 인터페이스, 추가적인 보안 기능을 지원한다는 장점이 있습니다. 
        - 일반적인 역할로써는 라우터와 L3 스위치가 큰 차이가 없고, 부가 기능이 많은 라우터가 고급 장비로써의 위치를 가지고 있습니다.

---

본문은 다음의 자료들을 참고해서 공부를 한 내용이고, 저는 학생이다보니 틀린 내용이 있을 수 있습니다. 알려주시면 정정하도록 하겠습니다.

- OSI Model. In *Wikipedia*.
- Physical Layer. In *Wikipedia*.
- 10BASE2. In *Wikipedia*.
- Ethernet Hub. In *Wikipedia*.
- Data Link Layer. In *Wikipedia*.
- Network Bridge. In *Wikipedia*.
- Network Layer. In *Wikipedia*.
- Router. In *Wikipedia*.
- Ipwithease.com. (n.d.). *[Layer 3 Switch vs Router – Know the difference](https://ipwithease.com/difference-between-router-and-layer-3-switch/)*.